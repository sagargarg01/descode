class chatEngine{constructor(e,s){this.chatBox=$("#"+e),this.userEmail=s,this.socket=io.connect("https://desicode.herokuapp.com"),this.userEmail&&this.connectionHandler()}connectionHandler(){let e=this;this.socket.on("connect",(function(){console.log("connection established using sockets...!"),e.socket.emit("join_room",{user_email:e.userEmail,chatroom:"codeial"}),e.socket.on("user_joined",(function(e){console.log("a user joined!",e)}))})),$("#send-message").click((function(){let s=$("#chat-message-input").val();""!=s&&e.socket.emit("send_message",{message:s,user_email:e.userEmail,chatroom:"codeial"}),$("#chat-message-input").val("")})),e.socket.on("receive_message",(function(s){console.log("message received",s);let i="other-message";s.user_email==e.userEmail&&(i="self-message"),"self-message"===i?$("#chat-messages-list").append(`<div class="outgoing_msg">\n                <div class="sent_msg">\n                   <p>${s.message}</p>\n                </div>\n             </div>`):$("#chat-messages-list").append(`<div class="incoming_msg">\n                <div class="incoming_msg_img"> <img src="https://ptetutorials.com/images/user-profile.png"\n                      alt="user">\n                </div>\n                <div class="received_msg">\n                   <div class="received_withd_msg">\n                      <p>${s.message}</p>\n                      <small class="time_date"> ${s.user_email}</small>\n                   </div>\n                </div>\n             </div>`)}))}}